{"ast":null,"code":"var _jsxFileName = \"/Users/David/Desktop/bootcamp2/project-3/Project-3/client/src/pages/SavedProperties.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Jumbotron, Container, CardColumns, Card, Button } from 'react-bootstrap';\nimport { GET_ME } from '../utils/queries';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { REMOVE_PROPERTY, SAVE_PROPERTY } from '../utils/mutations';\nimport Auth from '../utils/auth'; // import { Property } from '../components/Property'\n\nimport { getSavedPropertyIds, removePropertyId } from '../utils/localStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SavedProperties = () => {\n  _s();\n\n  const {\n    loading,\n    data\n  } = useQuery(GET_ME);\n  const [removeProperty] = useMutation(REMOVE_PROPERTY); // console.log(data.me.savedProperties)\n\n  const userData = {}; // return(\n  // [address:\n  // price:\n  // photo:\n  // ]\n\n  const handleDeleteProperty = async (event, house, baths, beds, sqft, lot_size) => {\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\n    if (!token) return false;\n\n    try {\n      await removeProperty({\n        // variables: {propertyId}\n        variables: {\n          event,\n          house,\n          baths,\n          beds,\n          sqft,\n          lot_size\n        }\n      }); //only triggers if the removeProperty mutation is successful\n\n      removePropertyId(event, house, baths, beds, sqft, lot_size);\n    } catch (e) {\n      console.log(e);\n    }\n  }; // if data isn't here yet, say so\n\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"LOADING RESULTS...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 23\n  }, this); // };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      fluid: true,\n      className: \"text-light bg-dark\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Viewing saved properties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: data.me.savedProperties.length > 0 ? `Viewing ${data.me.savedProperties.length} saved ${data.me.savedProperties.length === 1 ? 'property' : 'properties'}:` : 'You have no saved properties!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.me.savedProperties.map(property => {\n          console.log(property, \"PROPERTY!!!!!!!!!!\");\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(Card // key={propertyId} \n            , {\n              border: \"dark\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"small\",\n                  children: [\"Price: \", property.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"small\",\n                  children: [\" Address: \", property.address]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"small\",\n                  alt: \"picture of property\",\n                  src: property.photo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"btn-block btn-danger\",\n                  onClick: () => handleDeleteProperty(),\n                  children: \"Delete this Property!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SavedProperties, \"LaKKJPzjE4vUxVRnB3K/kggL694=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = SavedProperties;\nexport default SavedProperties;\n\nvar _c;\n\n$RefreshReg$(_c, \"SavedProperties\");","map":{"version":3,"names":["React","useState","useEffect","Jumbotron","Container","CardColumns","Card","Button","GET_ME","useQuery","useMutation","REMOVE_PROPERTY","SAVE_PROPERTY","Auth","getSavedPropertyIds","removePropertyId","SavedProperties","loading","data","removeProperty","userData","handleDeleteProperty","event","house","baths","beds","sqft","lot_size","token","loggedIn","getToken","variables","e","console","log","me","savedProperties","length","map","property","price","address","photo"],"sources":["/Users/David/Desktop/bootcamp2/project-3/Project-3/client/src/pages/SavedProperties.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Jumbotron, Container, CardColumns, Card, Button } from 'react-bootstrap';\r\nimport {GET_ME} from '../utils/queries';\r\nimport {useQuery, useMutation} from '@apollo/client';\r\nimport { REMOVE_PROPERTY, SAVE_PROPERTY } from '../utils/mutations';\r\nimport Auth from '../utils/auth';\r\n// import { Property } from '../components/Property'\r\nimport { getSavedPropertyIds, removePropertyId } from '../utils/localStorage';\r\n\r\nconst SavedProperties = () => {\r\n  const {loading, data} = useQuery(GET_ME);\r\n  const [removeProperty] = useMutation(REMOVE_PROPERTY); \r\n// console.log(data.me.savedProperties)\r\n  const userData = {};\r\n  // return(\r\n  // [address:\r\n  // price:\r\n  // photo:\r\n  // ]\r\n  \r\n  \r\n  const handleDeleteProperty = async (event, house, baths, beds, sqft, lot_size) => {\r\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\r\n    if (!token) return false;\r\n\r\n    try {\r\n      await removeProperty({\r\n        // variables: {propertyId}\r\n        variables: {event, house, baths, beds, sqft, lot_size}\r\n      })\r\n\r\n      //only triggers if the removeProperty mutation is successful\r\n      removePropertyId(event, house, baths, beds, sqft, lot_size);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  // if data isn't here yet, say so\r\n  if (loading) return <h2>LOADING RESULTS...</h2>\r\n\r\n  \r\n// };\r\n  return (\r\n    <>\r\n      <div fluid className='text-light bg-dark'>\r\n        <Container>\r\n          <h1>Viewing saved properties</h1>\r\n        </Container>\r\n      </div>\r\n      <Container>\r\n        <h2>\r\n          {data.me.savedProperties.length > 0\r\n            ? `Viewing ${data.me.savedProperties.length} saved ${data.me.savedProperties.length === 1 ? 'property' : 'properties'}:`\r\n            : 'You have no saved properties!'}\r\n        </h2>\r\n        <div>\r\n          {data.me.savedProperties.map((property) => {\r\n            console.log(property, \"PROPERTY!!!!!!!!!!\")\r\n            return (\r\n              <div className=\"container\">\r\n                  <Card \r\n                    // key={propertyId} \r\n                    border='dark'\r\n                    >\r\n                   \r\n                  <Card.Body> \r\n                    {/* <Card.Title>{address}</Card.Title> */}\r\n                    <p className='small'>Price: {property.price}</p>\r\n                    <p className='small'> Address: {property.address}</p>\r\n                    <img className='small' alt='picture of property' src= {property.photo}/>\r\n                  \r\n                    {/* <img >{property.photo}</img> */}\r\n                  <Button className='btn-block btn-danger' onClick={() => handleDeleteProperty()}>\r\n                  \r\n                    Delete this Property!\r\n                  </Button>\r\n                </Card.Body>\r\n              </Card>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SavedProperties;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}